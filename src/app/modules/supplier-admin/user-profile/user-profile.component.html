<main id="main">
  <section>
    <div class="container-fluid">
      <div class="row align-items-center justify-content-between">
        <div class="col-lg-6 col-xl-6 col-md-6 col-sm-6 col-6">
          <div class="form-group mb-0">
            <h4 class="text-theme"><strong>User Profile</strong></h4>
          </div><br>
        </div>
        <div class="col-lg-6 col-xl-6 col-md-6 col-sm-6 col-6 text-end">
          <button class="btn btn-primary" routerLink="/supplier-admin/project-list">
            Back
          </button>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <div class="card mb-4">
            <div class="card-body">

              <!-- Company Details -->
              <div class="row mb-4">
                <div class="col-12">
                  <h5 class="text-primary mb-3">Company Details</h5>
                </div>

                <div class="col-md-6 mb-3">
                  <div class="row">
                    <label class="col-sm-4 col-form-label">Company Name </label>
                    <div class="col-sm-8">
                      <span class="form-control readonly-input"> {{loginUser?.companyName || '-'}} </span>
                    </div>
                  </div>
                </div>

                <div class="col-md-6 mb-3">
                  <div class="row">
                    <label class="col-sm-4 col-form-label">Company Website</label>
                    <div class="col-sm-8">
                      <span class="form-control readonly-input"> {{loginUser?.website || '-'}} </span>
                    </div>
                  </div>
                </div>

                <div class="col-md-6 mb-3">
                  <div class="row">
                    <label class="col-sm-4 col-form-label">Company Address</label>
                    <div class="col-sm-8">
                      <span class="form-control readonly-input"> {{loginUser?.companyAddress || '-'}} </span>
                    </div>
                  </div>
                </div>

                <div class="col-md-6 mb-3">
                  <div class="row">
                    <label class="col-sm-4 col-form-label">Country</label>
                    <div class="col-sm-8">
                      <span class="form-control readonly-input"> {{loginUser?.country || '-'}} </span>
                    </div>
                  </div>
                </div>

                <div class="col-md-6 mb-3">
                  <div class="row">
                    <label class="col-sm-4 col-form-label">Contact Email</label>
                    <div class="col-sm-8">
                      <span class="form-control readonly-input"> {{loginUser?.email || '-'}} </span>
                    </div>
                  </div>
                </div>

                <div class="col-md-6 mb-3">
                  <div class="row">
                    <label class="col-sm-4 col-form-label">Contact Number</label>
                    <div class="col-sm-8">
                      <span class="form-control readonly-input"> {{loginUser?.companyContactNumber || '-' }} </span>
                    </div>
                  </div>
                </div>

                <div class="col-md-6 mb-3">
                  <div class="row">
                    <label class="col-sm-4 col-form-label">Year Established</label>
                    <div class="col-sm-8">
                      <span class="form-control readonly-input"> {{loginUser?.yearOfEstablishment || '-' }} </span>
                    </div>
                  </div>
                </div>

                <div class="col-md-6 mb-3">
                  <div class="row">
                    <label class="col-sm-4 col-form-label">Executive Summary</label>
                    <div class="col-sm-8">
                      <span class="form-control readonly-input"> {{loginUser?.executiveSummary || '-' }} </span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- POC Details -->
              <div class="row mb-4">
                <div class="col-12">
                  <h5 class="text-primary mb-3">POC Details</h5>
                </div>

                <div class="col-md-6 mb-3">
                  <div class="row">
                    <label class="col-sm-4 col-form-label">POC Name</label>
                    <div class="col-sm-8">
                      <span class="form-control readonly-input"> {{loginUser?.poc_name || '-' }} </span>
                    </div>
                  </div>
                </div>

                <div class="col-md-6 mb-3">
                  <div class="row">
                    <label class="col-sm-4 col-form-label">POC Phone</label>
                    <div class="col-sm-8">
                      <span class="form-control readonly-input"> {{loginUser?.poc_phone || '-' }} </span>
                    </div>
                  </div>
                </div>

                <div class="col-md-6 mb-3">
                  <div class="row">
                    <label class="col-sm-4 col-form-label">POC Email</label>
                    <div class="col-sm-8">
                      <span class="form-control readonly-input"> {{loginUser?.poc_email || '-' }} </span>
                    </div>
                  </div>
                </div>

                <div class="col-md-6 mb-3">
                  <div class="row">
                    <label class="col-sm-4 col-form-label">POC Role</label>
                    <div class="col-sm-8">
                      <span class="form-control readonly-input"> {{loginUser?.poc_role || '-' }} </span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Business Details -->
              <div class="row mb-4">
                <div class="col-12">
                  <h5 class="text-primary mb-3">Business Details</h5>
                </div>

                <div class="col-md-6 mb-3">
                  <div class="row">
                    <label class="col-sm-4 col-form-label">Business Type
                      <i class="fas fa-info-circle ms-1" data-bs-toggle="tooltip" data-bs-placement="top"
                         title="Select the legal structure of your business (e.g., Private Limited, LLP, etc.)."></i>
                    </label>
                    <div class="col-sm-8">
                      <ng-select
                        [items]="businessTypesList"
                        [multiple]="true"
                        [closeOnSelect]="false"
                        [searchable]="true"
                        [(ngModel)]="selectedBusinessTypes"
                        name="selectedBusinessTypes"
                        bindLabel="name"
                        bindValue="value"
                        placeholder="Select business type"
                        (change)="onBusinessTypeChange()">
                      </ng-select>
                      <div class="mt-2">
                        <span class="form-control readonly-input"> {{ loginUser?.typeOfCompany || '-' }} </span>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-md-6 mb-3">
                  <div class="row">
                    <label class="col-sm-4 col-form-label">Industry Sector
                      <i class="fas fa-info-circle ms-1" data-bs-toggle="tooltip" data-bs-placement="top"
                         title="Select the primary industry sectors your company operates in."></i>
                    </label>
                    <div class="col-sm-8">
                      <ng-select
                        [items]="industryList"
                        [multiple]="true"
                        [closeOnSelect]="false"
                        [searchable]="true"
                        [(ngModel)]="selectedIndustries"
                        name="selectedIndustries"
                        bindLabel="name"
                        bindValue="name"
                        placeholder="Select industry sectors"
                        (change)="onIndustryChange()">
                      </ng-select>
                      <div class="mt-2">
                        <span class="form-control readonly-input"> {{ selectedIndustries?.join(', ') || '-' }} </span>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-md-6 mb-3">
                  <div class="row">
                    <label for="employeeCount" class="col-sm-4 col-form-label">Company Size
                      <i class="fas fa-info-circle ms-1" data-bs-toggle="tooltip" data-bs-placement="top"
                         title="Enter the total number of employees in your company."></i>
                    </label>
                    <div class="col-sm-8">
                      <input [(ngModel)]="loginUser.employeeCount" name="employeeCount" type="text"
                        class="form-control" placeholder="Enter company size" (keypress)="NumberOnly($event)"
                        id="employeeCount">
                      <div class="mt-2">
                        <span class="form-control readonly-input"> {{ loginUser?.employeeCount || '-' }} </span>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-md-6 mb-3">
                  <div class="row">
                    <label for="turnover" class="col-sm-4 col-form-label">Turnover
                      <i class="fas fa-info-circle ms-1" data-bs-toggle="tooltip" data-bs-placement="top"
                         title="Mention the annual revenue or turnover (e.g., â‚¹5 Cr, $1M)."></i>
                    </label>
                    <div class="col-sm-8">
                      <input [(ngModel)]="loginUser.turnover" name="turnover" type="text"
                        class="form-control" placeholder="Enter turnover" (keypress)="NumberOnly($event)"
                        id="turnover">
                      <div class="mt-2">
                        <span class="form-control readonly-input"> {{ loginUser?.turnover || '-' }} </span>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-md-6 mb-3">
                  <div class="row">
                    <label for="totalProjectsExecuted" class="col-sm-4 col-form-label">Total Projects Executed
                      <i class="fas fa-info-circle ms-1" data-bs-toggle="tooltip" data-bs-placement="top"
                         title="Enter the total number of projects your company has completed."></i>
                    </label>
                    <div class="col-sm-8">
                      <input [(ngModel)]="loginUser.totalProjectsExecuted" name="totalProjectsExecuted"
                        type="text" class="form-control" placeholder="Enter total projects"
                        (keypress)="NumberOnly($event)" id="totalProjectsExecuted">
                      <div class="mt-2">
                        <span class="form-control readonly-input"> {{ loginUser?.totalProjectsExecuted || '-' }} </span>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-md-6 mb-3">
                  <div class="row">
                    <label for="certifications" class="col-sm-4 col-form-label">Certifications
                      <i class="fas fa-info-circle ms-1" data-bs-toggle="tooltip" data-bs-placement="top"
                         title="List any official certifications or accreditations (e.g., ISO 9001, CMMI)."></i>
                    </label>
                    <div class="col-sm-8">
                      <div class="d-flex gap-2 mb-2">
                        <input [(ngModel)]="newCertification" name="newCertification" type="text"
                          class="form-control" placeholder="Add certification and press Enter"
                          (keydown.enter)="handleEnterKey($event, 'certifications')" id="certifications">
                      </div>
                      <div *ngIf="certifications.length > 0" class="mb-2">
                        <span *ngFor="let cert of certifications; let i = index" class="badge bg-primary me-2 mb-2">
                          {{cert}}
                          <button class="btn btn-sm text-white p-0 ms-1" (click)="removeArrayItem('certifications', i)">Ã—</button>
                        </span>
                      </div>
                      <div class="mt-2">
                        <span class="form-control readonly-input"> {{ getFormattedCertifications() }} </span>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-md-6 mb-3">
                  <div class="row">
                    <label class="col-sm-4 col-form-label">Expertise
                      <i class="fas fa-info-circle ms-1" data-bs-toggle="tooltip" data-bs-placement="top"
                         title="List all the products, platforms, or software solutions your company has built or developed over time (e.g., ERP systems, mobile apps, SaaS platforms)."></i>
                    </label>
                    <div class="col-sm-8">
                      <ng-select
                        [items]="expertiseGroupedOptions"
                        [multiple]="true"
                        [closeOnSelect]="false"
                        [searchable]="true"
                        [loading]="isLoadingExpertise"
                        [(ngModel)]="selectedExpertiseItems"
                        name="selectedExpertiseItems"
                        [groupBy]="'type'"
                        [hideSelected]="false"
                        [virtualScroll]="true"
                        bindLabel="name"
                        bindValue="itemId"
                        placeholder="Select expertise"
                        (change)="onExpertiseSelectionChange($event)">
                        <ng-template ng-header-tmp>
                          <div class="p-2 border-bottom">
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox"
                                [checked]="selectedExpertiseItems?.length === expertiseGroupedOptions?.length"
                                (change)="toggleSelectAllExpertise($event)">
                              <label class="form-check-label">Select All</label>
                            </div>
                          </div>
                        </ng-template>
                        <ng-template ng-optgroup-tmp let-item="item">
                          <span class="group-header text-primary">{{item.type | titlecase}}</span>
                        </ng-template>
                        <ng-template ng-option-tmp let-item="item">
                          <span>{{item.name}}</span>
                        </ng-template>
                      </ng-select>
                      <div *ngFor="let expertise of selectedExpertise; let i = index" class="mt-2">
                        <div class="d-flex align-items-center">
                          <span class="badge bg-primary me-2">{{expertise.name}}</span>
                          <button *ngIf="i >= existingExpertise.length" class="btn btn-sm btn-danger" (click)="removeExpertise(i)">Ã—</button>
                        </div>
                        <div class="mt-2">
                          <ng-select
                            [items]="subExpertiseOptions"
                            [multiple]="true"
                            [closeOnSelect]="false"
                            [searchable]="true"
                            [loading]="isLoadingSubExpertise"
                            [(ngModel)]="selectedSubExpertiseMap[i]"
                            [addTag]="true"
                            [addTagText]="'Add new: '"
                            bindLabel="name"
                            bindValue="name"
                            placeholder="Select or add sub-expertise"
                            (change)="onSubExpertiseChange(i, $event)">
                            <ng-template ng-header-tmp>
                              <div class="p-2 border-bottom">
                                <div class="form-check">
                                  <input class="form-check-input" type="checkbox"
                                    [checked]="selectedSubExpertiseMap[i]?.length === subExpertiseOptions?.length"
                                    (change)="toggleSelectAllSubExpertise(i, $event)">
                                  <label class="form-check-label">Select All</label>
                                </div>
                              </div>
                            </ng-template>
                          </ng-select>
                          <button class="btn btn-sm btn-primary mt-2" (click)="addSubExpertise(i)"
                            [disabled]="!selectedSubExpertiseMap[i]?.length">
                            Add Sub-Expertise
                          </button>
                          <div *ngIf="subExpertiseMap[i]?.length" class="mt-2">
                            <span *ngFor="let sub of subExpertiseMap[i]; let j = index" class="badge bg-secondary me-2">
                              {{sub}}
                              <button class="btn btn-sm text-white" (click)="removeSubExpertise(i, j)">Ã—</button>
                            </span>
                          </div>
                        </div>
                      </div>
                      <div class="mt-2">
                        <span class="form-control readonly-input"> {{ getFormattedExpertise() }} </span>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-md-6 mb-3">
                  <div class="row">
                    <label class="col-sm-4 col-form-label">I Can Do</label>
                    <div class="col-sm-8">
                      <ng-select
                        [items]="tags"
                        [multiple]="true"
                        [closeOnSelect]="false"
                        [searchable]="true"
                        [loading]="isLoadingTags"
                        [(ngModel)]="selectedTags"
                        [compareWith]="compareTagsFn"
                        bindLabel="name"
                        placeholder="Select tags"
                        (search)="onTagSearch($event)"
                        (change)="onTagSelectionChange($event)"
                        [clearable]="false">
                      </ng-select>
                      <div class="mt-2">
                        <span class="form-control readonly-input"> {{ getFormattedICanDo() }} </span>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-md-6 mb-3">
                  <div class="row">
                    <label class="col-sm-4 col-form-label">Technology Stack</label>
                    <div class="col-sm-8">
                      <span class="form-control readonly-input"> {{ getFormattedTechnologyStack() }} </span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Client Information -->
              <div class="row mb-4">
                <div class="col-12">
                  <h5 class="text-primary mb-3">Client Information</h5>
                </div>

                <div class="col-md-6 mb-3">
                  <div class="row">
                    <label class="col-sm-4 col-form-label">Key Clients</label>
                    <div class="col-sm-8">
                      <span class="form-control readonly-input"> {{ getFormattedKeyClients() }} </span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Supplier Type -->
              <div class="row mb-4">
                <div class="col-12">
                  <h5 class="text-primary mb-3">Supplier Type</h5>
                </div>

                <div class="col-md-6 mb-3">
                  <div class="row">
                    <label class="col-sm-4 col-form-label">Resource Sharing Supplier</label>
                    <div class="col-sm-8">
                      <span class="form-control readonly-input"> {{ loginUser?.resourceSharingSupplier ? 'True' : 'False' }} </span>
                    </div>
                  </div>
                </div>

                <div class="col-md-6 mb-3">
                  <div class="row">
                    <label class="col-sm-4 col-form-label">Sub Contracting Supplier</label>
                    <div class="col-sm-8">
                      <span class="form-control readonly-input"> {{ loginUser?.subcontractingSupplier ? 'True' : 'False' }} </span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Update Profile Button -->
              <div class="row">
                <div class="col-12 text-end">
                  <button class="btn btn-primary" (click)="updateProfile()" [disabled]="isUpdating">
                    <span *ngIf="isUpdating" class="spinner-border spinner-border-sm me-1"></span>
                    {{ isUpdating ? 'Updating...' : 'Update Profile' }}
                  </button>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>

<!-- <main id="main">
  <section class="user-profile-section">
    <div class="container">
      <div class="row align-items-center mb-5">
        <div class="col-lg-10 col-xl-10 col-md-10 col-sm-10 col-8 mob-mb1">
          <h4 class="text-theme mb-4"><strong>User Profile</strong></h4>
        </div>
        <div class="col-lg-2 col-xl-2 col-md-4 col-sm-4 col-12 text-end">
          <a routerLink="/supplier-admin/supplier-dashboard-header" class="btn btn-primary text-dark">Back</a>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-5 col-xl-5 col-12 row">
          <form [formGroup]="userForm" (ngSubmit)="onSubmit()">

            <div class="form-group">
              <label>Company Name</label>
              <input type="text" class="form-control" formControlName="name" readonly />
            </div>

            <div class="form-group">
              <label>Company Website</label>
              <input type="text" class="form-control" formControlName="website" readonly />
            </div>

            <div class="form-group">
              <label>Year of Establishment</label>
              <input type="text" class="form-control" formControlName="yearOfEstablishment" readonly />
            </div>

            <div class="form-group">
              <label>Type Of Company</label>
              <input type="text" class="form-control" formControlName="typeOfCompany" readonly />
            </div>

            <div class="form-group">
              <label>VAT or GST Number</label>
              <input type="text" class="form-control" formControlName="VATOrGSTNumber" readonly />
            </div>

            <div class="form-group">
              <label>Company Address</label>
              <input type="text" class="form-control" formControlName="companyAddress" readonly />
            </div>

            <div class="form-group">
              <label>Developer/Engineer Teams Count</label>
              <input type="text" class="form-control" formControlName="employeeCount" readonly />
            </div>

            <div class="form-group">
              <label>Other Team Members count</label>
              <input type="text" class="form-control" formControlName="employeeCount" readonly />
            </div>

            <div class="form-group">
              <label>Email</label>
              <input type="email" class="form-control" formControlName="email" readonly />
            </div>

            <div class="form-group">
              <label>Company Directors/Owners</label>
              <input type="text" class="form-control" formControlName="companyDirectors_Owners" readonly />
            </div>

            <div class="form-group">
              <label>Phone Number</label>
              <input type="text" class="form-control" formControlName="customerSupportContact" readonly />
            </div>
          </form>

          <div class="col-lg-2 col-xl-2 col-md-4 col-sm-4 col-12 text-end">
            <a href="javascript:;" class="btn btn-primary text-dark">Submit</a>
          </div>
        </div>
      </div>
    </div>
  </section>
</main> -->


